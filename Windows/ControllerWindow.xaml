<Window x:Class="TikTak.Windows.ControllerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TikTak" 
    Height="470" Width="340"
    WindowStartupLocation="CenterScreen"
    ResizeMode="NoResize"
    KeyDown="Window_KeyDown"
    Background="#F5F7FA"
    FontFamily="Segoe UI"
    ShowInTaskbar="False"
    Topmost="True"
    WindowStyle="SingleBorderWindow"
    Closing="Window_Closing">
    
    <Window.Resources>
    <!-- Modern Button Style -->
    <Style x:Key="ModernButton" TargetType="Button">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}" 
                CornerRadius="6"
                Padding="{TemplateBinding Padding}">
                <ContentPresenter HorizontalAlignment="Center" 
                        VerticalAlignment="Center"/>
            </Border>
            </ControlTemplate>
        </Setter.Value>
        </Setter>
    </Style>
    
    <!-- Centered ComboBox Style -->
    <Style x:Key="CenteredComboBox" TargetType="ComboBox">
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="Padding" Value="8,4"/>
    </Style>
    </Window.Resources>
    
    <Grid Margin="12,12,12,8" MouseDown="Grid_MouseDown">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

    <!-- Header with Title and Settings Button -->
    <Grid Grid.Row="0" Margin="0,0,0,16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Title Section (Blue Background) - Draggable -->
        <Border Grid.Column="0" Background="#3498DB" CornerRadius="8,8,0,0" Padding="8" Margin="0,0,10,0" 
                MouseLeftButtonDown="TitleArea_MouseLeftButtonDown" Cursor="SizeAll">
            <Grid Margin="4,0,0,0">
                <TextBlock x:Name="TitleTextBlock" 
                       Text="TikTak Kontrol"
                       FontSize="15" FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Cursor="Hand"
                       MouseLeftButtonDown="TitleTextBlock_MouseLeftButtonDown"/>
                <TextBox x:Name="TitleTextBox" 
                     Text="Kontrol Paneli"
                     FontSize="15" FontWeight="Bold"
                     Foreground="White"
                     Background="Transparent"
                     BorderThickness="0"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center"
                     Visibility="Collapsed"
                     KeyDown="TitleTextBox_KeyDown"
                     LostFocus="TitleTextBox_LostFocus"
                     CaretBrush="White"/>
            </Grid>
        </Border>
        
        <!-- Settings Button (Outside Blue Area) -->
        <Button x:Name="SettingsButton" 
            Grid.Column="1"
            Content="⚙️" 
            Width="32" Height="32"
            Background="#F5F7FA" 
            Foreground="#7F8C8D" 
            BorderThickness="1"
            BorderBrush="#BDC3C7"
            FontSize="14"
            Cursor="Hand"
            ToolTip="Ayarlar"
            VerticalAlignment="Center"
            Click="SettingsButton_Click"
            Style="{StaticResource ModernButton}"/>
    </Grid>

    <!-- Timer Display -->
    <Border Grid.Row="1" Background="#2C3E50" CornerRadius="8" Height="45" Margin="0,0,0,12">
        <TextBlock x:Name="TimeDisplay" 
               Text="20:00" 
               FontSize="24" 
               FontWeight="Bold"
               Foreground="#ECF0F1"
               HorizontalAlignment="Center"
               VerticalAlignment="Center"
               FontFamily="Consolas"/>
    </Border>

    <!-- Time Input -->
    <Grid Grid.Row="2" Margin="0,0,0,12">
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#BDC3C7" BorderThickness="2" Margin="0,0,8,0">
        <Grid>
            <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBox x:Name="MinutesInput" 
                 Grid.Column="0"
                 Text="20" 
                 FontSize="14"
                 Height="32"
                 Padding="8,0"
                 BorderThickness="0"
                 Background="Transparent"
                 VerticalContentAlignment="Center" 
                 HorizontalContentAlignment="Right"
                 KeyDown="MinutesInput_KeyDown"
                 LostFocus="MinutesInput_LostFocus"
                 MaxLength="3"
                 InputScope="Number"/>
            
            <TextBlock Grid.Column="1" 
                   Text="dakika" 
                   VerticalAlignment="Center" 
                   Margin="4,0,8,0" 
                   FontSize="11"
                   Foreground="#7F8C8D"/>
        </Grid>
        </Border>
        
        <Button x:Name="SetTimeButton" 
            Grid.Column="1"
            Content="Ayarla" 
            Width="70" Height="32"
            Click="SetTimeButton_Click" 
            Background="#3498DB" Foreground="White" 
            FontSize="12"
            Style="{StaticResource ModernButton}"/>
    </Grid>

    <!-- Main Controls with Time Adjustment -->
    <Grid Grid.Row="3" Margin="0,0,0,12">
        <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Main Control Buttons (Icon Only) -->
        <Button x:Name="PlayPauseButton" 
            Grid.Column="0"
            Content="▶" 
            Height="44" 
            Margin="2" 
            Click="PlayPauseButton_Click" 
            Background="#27AE60" Foreground="White" 
            FontSize="20"
            ToolTip="Başlat/Durdur"
            Style="{StaticResource ModernButton}"/>
        
        <Button x:Name="ResetButton" 
            Grid.Column="1"
            Content="⟲" 
            Height="44" 
            Margin="2" 
            Click="ResetButton_Click" 
            Background="#3498DB" Foreground="White" 
            FontSize="18"
            ToolTip="Sıfırla"
            Style="{StaticResource ModernButton}"/>
        
        <Button x:Name="ZeroButton" 
            Grid.Column="2"
            Content="0:00" 
            Height="44" 
            Margin="2" 
            Click="ZeroButton_Click" 
            Background="#95A5A6" Foreground="White" 
            FontSize="14"
            ToolTip="Sıfıra Çek"
            Style="{StaticResource ModernButton}"/>
        
        <Button x:Name="ExitButton" 
            Grid.Column="3"
            Content="✕" 
            Height="44" 
            Margin="2" 
            Click="ExitButton_Click" 
            Background="#E74C3C" Foreground="White" 
            FontSize="18"
            ToolTip="Sistem Tepsisine Gizle"
            Style="{StaticResource ModernButton}"/>
    </Grid>
    
    <!-- Time Adjustment Section -->
    <Grid Grid.Row="4" Margin="0,0,0,12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="4"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="8"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Add Minutes Input (Smaller) -->
        <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#BDC3C7" BorderThickness="2">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" 
                       Text="+" 
                       VerticalAlignment="Center" 
                       Margin="6,0,3,0" 
                       FontSize="14"
                       FontWeight="Bold"
                       Foreground="#16A085"/>
                
                <TextBox x:Name="AddMinutesInput" 
                     Grid.Column="1"
                     Text="5" 
                     FontSize="13"
                     Height="28"
                     Padding="2,0"
                     BorderThickness="0"
                     Background="Transparent"
                     VerticalContentAlignment="Center" 
                     HorizontalContentAlignment="Right"
                     KeyDown="AddMinutesInput_KeyDown"
                     MaxLength="3"
                     InputScope="Number"/>
                
                <TextBlock Grid.Column="2" 
                       Text="dk" 
                       VerticalAlignment="Center" 
                       Margin="3,0,6,0" 
                       FontSize="10"
                       Foreground="#7F8C8D"/>
            </Grid>
        </Border>
        
        <!-- Add Button -->
        <Button x:Name="AddMinutesButton" 
            Grid.Column="2"
            Content="Ekle" 
            Width="50" Height="28"
            Click="AddMinutesButton_Click" 
            FontSize="11"
            Background="#16A085" Foreground="White"
            ToolTip="Dakika ekle"
            Style="{StaticResource ModernButton}"/>
        
        <!-- Time Adjustment Buttons (All in one row) -->
        <StackPanel Grid.Column="4" Orientation="Horizontal">
            <Button x:Name="SubtractButton" 
                Content="−1" 
                Width="40" Height="28" 
                Margin="0,0,4,0"
                Click="SubtractButton_Click" 
                FontSize="11" 
                Background="#E67E22" Foreground="White"
                ToolTip="1 dakika çıkar"
                Style="{StaticResource ModernButton}"/>
            
            <Button x:Name="AddButton" 
                Content="+1" 
                Width="40" Height="28"
                Margin="0,0,4,0"
                Click="AddButton_Click" 
                FontSize="11"
                Background="#16A085" Foreground="White"
                ToolTip="1 dakika ekle"
                Style="{StaticResource ModernButton}"/>
            
            <Button x:Name="Add5Button" 
                Content="+5" 
                Width="40" Height="28"
                Click="Add5Button_Click" 
                FontSize="11"
                Background="#2980B9" Foreground="White"
                ToolTip="5 dakika ekle"
                Style="{StaticResource ModernButton}"/>
        </StackPanel>
    </Grid>

    <!-- Display Window Control -->
    <Border Grid.Row="5" Background="White" CornerRadius="8" Padding="8" Margin="0,0,0,10" BorderBrush="#E0E6ED" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="8"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Show/Hide and Fullscreen Buttons Row -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="4"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="4"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <Button x:Name="ShowButton" 
                    Grid.Column="0"
                    Content="🖥 Göster" 
                    Height="30" 
                    Click="ShowButton_Click" 
                    Background="#27AE60" Foreground="White" 
                    FontSize="11"
                    Style="{StaticResource ModernButton}"/>
                
                <Button x:Name="HideButton" 
                    Grid.Column="2"
                    Content="👁 Gizle" 
                    Height="30" 
                    Click="HideButton_Click" 
                    Background="#E67E22" Foreground="White" 
                    FontSize="11"
                    Style="{StaticResource ModernButton}"/>
                
                <Button x:Name="FullscreenButton" 
                    Grid.Column="4"
                    Content="⛶ Tam Ekran" 
                    Height="30" 
                    Click="FullscreenButton_Click" 
                    Background="#9B59B6" Foreground="White" 
                    FontSize="10"
                    Style="{StaticResource ModernButton}"/>
            </Grid>
            
            <!-- Position and Screen Selectors Row -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <ComboBox x:Name="PositionComboBox" 
                      Grid.Column="0"
                      Height="26"
                      SelectionChanged="PositionComboBox_SelectionChanged" 
                      FontSize="10"
                      Background="White"
                      BorderBrush="#BDC3C7"
                      BorderThickness="1"
                      Style="{StaticResource CenteredComboBox}">
                    <ComboBoxItem Content="🎯 Özel Konum" Tag="Custom"/>
                    <ComboBoxItem Content="📍 Sol Üst" Tag="TopLeft" IsSelected="True"/>
                    <ComboBoxItem Content="📍 Orta Üst" Tag="TopCenter"/>
                    <ComboBoxItem Content="📍 Sağ Üst" Tag="TopRight"/>
                    <ComboBoxItem Content="📍 Sol Orta" Tag="MiddleLeft"/>
                    <ComboBoxItem Content="📍 Merkez" Tag="Center"/>
                    <ComboBoxItem Content="📍 Sağ Orta" Tag="MiddleRight"/>
                    <ComboBoxItem Content="📍 Sol Alt" Tag="BottomLeft"/>
                    <ComboBoxItem Content="📍 Orta Alt" Tag="BottomCenter"/>
                    <ComboBoxItem Content="📍 Sağ Alt" Tag="BottomRight"/>
                </ComboBox>
                
                <ComboBox x:Name="ScreenComboBox" 
                      Grid.Column="2"
                      Height="26"
                      SelectionChanged="ScreenComboBox_SelectionChanged" 
                      FontSize="10"
                      Background="White"
                      BorderBrush="#BDC3C7"
                      BorderThickness="1"
                      Style="{StaticResource CenteredComboBox}">
                    <!-- Screens will be populated dynamically -->
                </ComboBox>
            </Grid>
        </Grid>
    </Border>
    
    <!-- Status Bar -->
    <Border Grid.Row="6" 
        Background="#34495E" 
        CornerRadius="0,0,8,8" 
        Padding="12,8" 
        Margin="0,4,0,0">
        <TextBlock x:Name="StatusText" 
               Text="⏸ Hazır"
               FontSize="11" 
               HorizontalAlignment="Center"
               Foreground="#ECF0F1"
               FontWeight="Medium"/>
    </Border>
    </Grid>
</Window>
